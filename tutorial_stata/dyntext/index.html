<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 3.3.0">
  <meta name="generator" content="Hugo 0.53" />
  <meta name="author" content="Research Methods in Political Science">

  
  
  
  
    
  
  <meta name="description" content="Using Stata dynamic tags in a text file with the dyndoc command Let us consider an example where we study the mpg and weight variables in auto.dta. In our examples below, we will first write the commands so that they will be displayed in our target HTML file. Then, we will write the commands so that Stata will process the Stata dynamic tags, displaying the results of the Stata commands in the target HTML file.">

  
  <link rel="alternate" hreflang="en-us" href="/tutorial_stata/dyntext/">

  


  

  

  

  

  

  

  
  
  
  <meta name="theme-color" content="#40a990">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/zenburn.min.css" crossorigin="anonymous">
      
    

    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono">
  

  <link rel="stylesheet" href="/styles.css">
  
  <link rel="stylesheet" href="/css/custom.css">
  

  
  
  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="PS0700 Research Methods">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="PS0700 Research Methods">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/tutorial_stata/dyntext/">

  
  
  
  
    
    
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="PS0700 Research Methods">
  <meta property="og:url" content="/tutorial_stata/dyntext/">
  <meta property="og:title" content="Dyntest Testing | PS0700 Research Methods">
  <meta property="og:description" content="Using Stata dynamic tags in a text file with the dyndoc command Let us consider an example where we study the mpg and weight variables in auto.dta. In our examples below, we will first write the commands so that they will be displayed in our target HTML file. Then, we will write the commands so that Stata will process the Stata dynamic tags, displaying the results of the Stata commands in the target HTML file."><meta property="og:image" content="/img/icon-192.png">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2019-01-05T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2019-01-05T00:00:00&#43;00:00">
  

  

  

  <title>Dyntest Testing | PS0700 Research Methods</title>

</head>
<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >
  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" role="textbox" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">PS0700 Research Methods</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/tutorial_stata/">
            
            <span>Stata Tutorials</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/tutorial/">
            
            <span>R Tutorials</span>
            
          </a>
        </li>

        
        

      

        

        
        
        

        <li class="nav-item">
          <a class="nav-link" href="/">
          
          <span><i class="fab fa-github" style="font-size: 1rem; line-height: 1.25"></i></span>
          
          </a>
        </li>

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>



<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <input name="q" type="search" class="form-control" id="search-query" placeholder="Search..." autocomplete="off">
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/tutorial_stata/">Overview</a>
    <ul class="nav docs-sidenav">
      
      <li class="active">
        <a href="/tutorial_stata/dyntext/">Testing</a>
      </li>
      
    </ul>
    

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/tutorial_stata/measurement_validity/">Measurement</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/tutorial_stata/measurement_validity/">Validity</a>
      </li>
      
      <li >
        <a href="/tutorial_stata/measurement_reliability/">Reliability</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

    </div>

    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
      <p class="docs-toc-title">On this page</p>
      

      <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#using-stata-dynamic-tags-in-a-text-file-with-the-dyndoc-command">Using Stata dynamic tags in a text file with the dyndoc command</a></li>
</ul></li>
</ul>
</nav>

      <ul class="nav toc-top">
        <li><a href="#">Back to top</a></li>
      </ul>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article" itemscope itemtype="http://schema.org/Article">

        <div class="docs-article-container">
          <h1 itemprop="name">Dyntest Testing</h1>

          <div class="article-style" itemprop="articleBody">
            

<h2 id="using-stata-dynamic-tags-in-a-text-file-with-the-dyndoc-command">Using Stata dynamic tags in a text file with the dyndoc command</h2>

<p>Let us consider an example where we study the <strong>mpg</strong> and <strong>weight</strong> variables
in <strong>auto.dta</strong>.  In our examples below, we will first write the commands so
that they will be displayed in our target HTML file.  Then, we will write the
commands so that Stata will process the Stata dynamic tags, displaying the
results of the Stata commands in the target HTML file.</p>

<p>We first use the <strong>sysuse</strong> command to load the dataset and then describe
the data using the <strong>describe</strong> command.</p>

<pre><code>&lt;&lt;dd_do&gt;&gt;
use data/auto, clear
describe
&lt;&lt;/dd_do&gt;&gt;
</code></pre>

<p>This produces the following Stata results:</p>

<pre><code>. sysuse auto, clear
(1978 Automobile Data)

. describe

Contains data from /Applications/Stata/ado/base/a/auto.dta
  obs:            74                          1978 Automobile Data
 vars:            12                          13 Apr 2016 17:45
 size:         3,182                          (_dta has notes)
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
make            str18   %-18s                 Make and Model
price           int     %8.0gc                Price
mpg             int     %8.0g                 Mileage (mpg)
rep78           int     %8.0g                 Repair Record 1978
headroom        float   %6.1f                 Headroom (in.)
trunk           int     %8.0g                 Trunk space (cu. ft.)
weight          int     %8.0gc                Weight (lbs.)
length          int     %8.0g                 Length (in.)
turn            int     %8.0g                 Turn Circle (ft.)
displacement    int     %8.0g                 Displacement (cu. in.)
gear_ratio      float   %6.2f                 Gear Ratio
foreign         byte    %8.0g      origin     Car type
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Sorted by: foreign

</code></pre>

<p>Now, we want to check if <strong>mpg</strong> is always greater than 0 and less than 100.
We use the <strong>assert</strong> command to perform the check.  In this case, we do not
want to include any output in the target HTML file, so we use the <strong>quietly</strong>
attribute to modify the behavior of the <strong>dd_do</strong> Stata dynamic tag.</p>

<pre><code>&lt;&lt;dd_do:quietly&gt;&gt;
assert mpg &gt; 0 &amp; mpg &lt; 100
&lt;&lt;/dd_do&gt;&gt;


</code></pre>

<p>If the data do not satisfy the conditions, <strong>dyndoc</strong> will fail with an error
message, which will occur if we run the same <strong>assert</strong> command in a do-file.</p>

<p>Next, we want to summarize the <strong>weight</strong> variable:</p>

<pre><code>&lt;&lt;dd_do&gt;&gt;
summarize weight
&lt;&lt;/dd_do&gt;&gt;
</code></pre>

<p>This produces the following in the target HTML file:</p>

<pre><code>. summarize weight

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
      weight |         74    3019.459    777.1936       1760       4840

</code></pre>

<p>We want to use the minimum and maximum values of <strong>weight</strong> in a sentence.
Instead of copying and pasting the numbers from the <strong>summarize</strong> output, we can
use the <strong>dd_display</strong> Stata dynamic tag with the <strong>r(min)</strong> and <strong>r(max)</strong>
stored results:</p>

<pre><code>The variable weight has minimum value &lt;&lt;dd_display: %4.2f `r(min)'&gt;&gt; and
has maximum value &lt;&lt;dd_display: %4.2f `r(max)'&gt;&gt;.
</code></pre>

<p>This produces the following in the target HTML file:</p>

<pre><code>
&gt; The variable weight has minimum value 1760.00
and has maximum value 4840.00.

</code></pre>

<p>The <strong>dd_display</strong> dynamic tag uses Stata&rsquo;s <strong>display</strong> command to evaluate
expressions.  It can be used as a calculator. For example, if we want to
include the $$range = max - min$$ in a sentence, instead of calculating the
number and then copying and pasting it, we can use</p>

<pre><code>The variable weight has range &lt;&lt;dd_display: %4.2f `r(max)'-`r(min)'&gt;&gt;.
</code></pre>

<p>which produces the following in the target HTML file:</p>

<pre><code>
&gt; The variable weight has range 3080.00.

</code></pre>

<p>Now, we want to graph <strong>mpg</strong> and <strong>weight</strong> using a scatterplot.  We use the
<strong>dd_do</strong> tag with the <strong>nooutput</strong> attribute to generate the scatterplot
first.  The <strong>nooutput</strong> attribute leaves the command in the output only,</p>

<pre><code>&lt;&lt;dd_do:nooutput&gt;&gt;
scatter mpg weight, mcolor(blue%50)
&lt;&lt;/dd_do&gt;&gt;
</code></pre>

<p>which generates a scatterplot of <strong>mpg</strong> and <strong>weight</strong> with 50% opacity
color markers.</p>

<pre><code>. scatter mpg weight, mcolor(blue%50)

.
. graph export static/img/auto.svg, replace
(note: file static/img/auto.svg not found)
(file static/img/auto.svg written in SVG format)

</code></pre>

<p>Now, we want to export the graph to a file and include an image link to the
file.</p>

<!-- <img src="auto.svg" height="400" alt="scatter mpg price" > -->

<p>This produces a graph of 400 pixels high.</p>




  

<figure>

<img src="/img/auto.svg" />



<figcaption data-pre="Figure " data-post=":" >
  <h4>A caption</h4>
  
</figcaption>

</figure>

<p><img src="/img/auto.svg" alt="" /></p>

          </div>

          

        </div>

        <div class="body-footer">
          Last updated on Jan 5, 2019
        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    &copy; Fanghui Zhao 2019 <i class="fas fa-tree" style="color: #40a990;"></i> &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
  </p>
</footer>


    </main>
  </div>
</div>

    

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha512-+NqPlbbtM1QqiK8ZAo4Yrj2c4lNQoGv8P79DPtKzj++l5jnN39rHA/xsqn8zE9l0uSoxaCdrOgFs6yjyfbBxSg==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/markdown.min.js"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    
    
    
    
    
    
    <script src="/js/academic.min.70f0041f5a24c6a675ac218c98d7ef71.js"></script>

    

  </body>
</html>


